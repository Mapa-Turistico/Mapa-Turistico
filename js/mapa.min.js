let sabores=[],experiencias=[],coresESons=[],aromas=[],bem_estar=[],data=null;const styles=[{featureType:"water",elementType:"all",stylers:[{hue:"#4DD3F7"},{saturation:84},{lightness:-16},{visibility:"simplified"}]},{featureType:"landscape",elementType:"all",stylers:[{hue:"#C3E3B3"},{saturation:45},{lightness:-13},{visibility:"simplified"}]},{featureType:"poi",elementType:"all",stylers:[{hue:"#73A55B"},{saturation:0},{lightness:0},{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"}]}];async function getData(target){const dataFetch=await fetch(`./data/${target}.json`);return await dataFetch.json()}function createModal(marker,type="marker"){const modal=document.createElement("div"),overlay=document.createElement("div");modal.classList.add("marker-modal"),overlay.classList.add("overlay");let preTitle=document.createElement("h3"),title=document.createElement("h1"),description=document.createElement("service"==type?"div":"p"),preClose=document.createElement("div"),close=document.createElement("div"),bar=document.createElement("div"),footer=document.createElement("footer");switch(type){case"marker":preTitle.innerText="Venha visitar";break;case"about":preTitle.innerText="Sobre a cidade de",modal.classList.add("about"),preClose.classList.add("pre-close"),preClose.innerHTML="<div>\n                              <small>Sobre</small>\n                              <h4>Pinhalzinho</h4>\n                            </div>";break;case"service":preTitle.innerText="Pinhalzinho",modal.classList.add("service"),preClose.classList.add("pre-close"),preClose.innerHTML="<div>\n                              <small>Conheça os</small>\n                              <h4>Serviços</h4>\n                            </div>";break;default:preTitle.innerText="Venha visitar"}title.innerText=marker.title,description.innerHTML=marker.desc,close.classList.add("close"),close.innerHTML='<img src="./images/close.svg" />',bar.classList.add("bar"),bar.innerHTML='<img src="./images/bar.svg" />';const removeContent=()=>{modal.remove(),overlay.remove()};close.onclick=function(){removeContent()},overlay.onclick=function(){removeContent()};const hasTel=""!=marker.tel,hasAddress=""!=marker.address,hasUrl=""!=marker.url;hasTel&&(footer.innerHTML=`\n    <div class="marker-tel">Telefone: <span>${marker.tel}</span><br /></div>`),hasAddress&&(footer.innerHTML+=`\n    <div class="marker-address">Endereço: <span>${marker.address}</span></div><br />`),hasUrl&&(footer.innerHTML+=`\n    <div class="marker-url">Para mais informações: <a href="${marker.url}" target="_blank">Visite o site<a></div>`),footer.innerHTML+='<div class="sufix-footer">\n                        <h3>Seja muito</h3>\n                        <h1>Bem-vindo</h1>\n                      </div>';const hasImages=marker.imgs.length>0;let slides="";if(hasImages){marker.imgs.forEach(img=>{slides+=`<div class="swiper-slide">\n\t\t\t\t\t\t    <img data-src="images/places/${marker.id+"/"+img}" class="swiper-lazy" />\n\t\t\t\t\t    </div>`});let slide=document.createElement("div");slide.innerHTML=`\x3c!-- Slider main container --\x3e\n                      <div class="swiper-container">\n                        \x3c!-- Additional required wrapper --\x3e\n                        <div class="swiper-wrapper">\n                          \x3c!-- Slides --\x3e\n                          ${slides}\n                        </div>\n                        \x3c!-- If we need pagination --\x3e\n                        <div class="swiper-pagination"></div>\n                      \n                        \x3c!-- If we need navigation buttons --\x3e\n                        <div class="swiper-button-prev"></div>\n                        <div class="swiper-button-next"></div>\n                      </div>`,modal.appendChild(slide)}modal.appendChild(bar),modal.appendChild(preClose),modal.appendChild(close),modal.appendChild(preTitle),modal.appendChild(title),modal.appendChild(document.createElement("hr")),modal.appendChild(description),modal.appendChild(footer),document.getElementsByTagName("body")[0].appendChild(modal),document.getElementsByTagName("body")[0].appendChild(overlay),hasImages&&new Swiper(".swiper-container",{loop:!1,grabCursor:!0,autoHeight:!0,preloadImages:!1,lazy:!0,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}!async function(){sabores=await getData("sabores"),experiencias=await getData("experiencias"),coresESons=await getData("coresesons"),aromas=await getData("aromas"),bem_estar=await getData("bemestar");const data=[...sabores,...bem_estar,...experiencias,...coresESons,...aromas];var historicalOverlay;function ZoomControl(controlDiv,map){controlDiv.style.padding="5px",controlDiv.style.top="87%";var controlWrapper=document.createElement("div");controlWrapper.className="zoomBox",controlWrapper.style.border="none",controlWrapper.style.backgroundColor="none",controlWrapper.style.borderStyle="none",controlWrapper.style.borderColor="none",controlWrapper.style.borderWidth="0px",controlWrapper.style.cursor="pointer",controlWrapper.style.textAlign="center",controlWrapper.style.width="auto",controlWrapper.style.display="flex",controlWrapper.style.justifyContent="revert",controlWrapper.style.alignContent="revert",controlWrapper.style.flexDirection="row-reverse",controlDiv.appendChild(controlWrapper);var zoomFixedButton=document.createElement("div");zoomFixedButton.style.width="86.818px",zoomFixedButton.style.height="46.993px",zoomFixedButton.style.backgroundImage='url("images/map/config/zoom-fixed.svg")',controlWrapper.appendChild(zoomFixedButton);var zoomInButton=document.createElement("div");zoomInButton.style.width="54.046px",zoomInButton.style.height="46.993px",zoomInButton.style.backgroundImage='url("images/map/config/zoom-in.svg")',controlWrapper.appendChild(zoomInButton);var zoomOutButton=document.createElement("div");zoomOutButton.style.width="54.046px",zoomOutButton.style.height="46.993px",zoomOutButton.style.backgroundImage='url("images/map/config/zoom-out.svg")',controlWrapper.appendChild(zoomOutButton),google.maps.event.addDomListener(zoomInButton,"click",(function(){map.setZoom(map.getZoom()+1)})),google.maps.event.addDomListener(zoomOutButton,"click",(function(){map.setZoom(map.getZoom()-1)})),google.maps.event.addDomListener(zoomFixedButton,"click",(function(){map.setZoom(15)}))}function initMap(){google||window.location.reload(!0);var map=new google.maps.Map(document.getElementById("map"),{zoom:15,center:{lat:-22.7833,lng:-46.5901},streetViewControl:!1,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.TERRAIN}),imageBounds={north:-22.7681,south:-22.793,east:-46.575,west:-46.6078};(historicalOverlay=new google.maps.GroundOverlay("images/map/background.svg",imageBounds)).setMap(map);var styledMap=new google.maps.StyledMapType(styles,{name:"Styled Map"});map.mapTypes.set("map_style",styledMap),map.setMapTypeId("map_style");var img_sabor={url:"images/map/markers/sabores.svg",size:new google.maps.Size(25,36)},img_experiencias={url:"images/map/markers/experiencias.svg",size:new google.maps.Size(25,36)},img_coresESons={url:"images/map/markers/coresesons.svg",size:new google.maps.Size(25,36)},img_aromas={url:"images/map/markers/aromas.svg",size:new google.maps.Size(25,36)},img_bem_estar={url:"images/map/markers/bem-estar.svg",size:new google.maps.Size(25,36)};let markersSabores=[],markersExperiencia=[],markersCoresESons=[],markersAromas=[],markersBem_estar=[];function setMarkers(map){var shape={coords:[1,1,1,20,18,20,18,1],type:"poly"},mcOptions={styles:[{url:"images/group.png",width:53,height:53,textSize:12,textColor:"white",gridSize:40,maxZoom:16,zoomOnClick:!1,minimumClusterSize:2}]};const updateMarkers=(dataList,markersList,img)=>{dataList.map(iten=>{const marker=new google.maps.Marker({position:{lat:iten.lat,lng:iten.lng},map:map,icon:img,shape:shape,title:iten.title,desc:iten.desc,tel:iten.tel,address:iten.address,url:iten.url,imgs:iten.imgs,zIndex:iten.zindex,labelContent:iten.zindex,id:iten.id});markersList.push(marker)})};updateMarkers(sabores,markersSabores,img_sabor);let markerClusterSabores=new MarkerClusterer(map,markersSabores,mcOptions);updateMarkers(experiencias,markersExperiencia,img_experiencias);let markerClusterExperiencia=new MarkerClusterer(map,markersExperiencia,mcOptions);updateMarkers(coresESons,markersCoresESons,img_coresESons);let markerClusterCoresESons=new MarkerClusterer(map,markersCoresESons,mcOptions);updateMarkers(aromas,markersAromas,img_aromas);let markerClusterAromas=new MarkerClusterer(map,markersAromas,mcOptions);updateMarkers(bem_estar,markersBem_estar,img_bem_estar);let markerClusterBem_estar=new MarkerClusterer(map,markersBem_estar,mcOptions);const addEventClusters=markerClusterList=>{google.maps.event.addListener(markerClusterList,"clusterclick",(function(cluster){map.setCenter(cluster.getCenter()),map.setZoom(map.getZoom()+3)}))};addEventClusters(markerClusterExperiencia),addEventClusters(markerClusterSabores),addEventClusters(markerClusterCoresESons),addEventClusters(markerClusterAromas),addEventClusters(markerClusterBem_estar);const options=document.querySelectorAll("#menu-rotas .option");function clear_Markers(){markerClusterSabores.clearMarkers(),markerClusterCoresESons.clearMarkers(),markerClusterBem_estar.clearMarkers(),markerClusterExperiencia.clearMarkers(),markerClusterAromas.clearMarkers()}function startMarkers(){clear_Markers(),markerClusterSabores=new MarkerClusterer(map,markersSabores,mcOptions),markerClusterBem_estar=new MarkerClusterer(map,markersBem_estar,mcOptions),markerClusterExperiencia=new MarkerClusterer(map,markersExperiencia,mcOptions),markerClusterCoresESons=new MarkerClusterer(map,markersCoresESons,mcOptions),markerClusterAromas=new MarkerClusterer(map,markersAromas,mcOptions)}options&&options.forEach(option=>{option.addEventListener("click",(function(){clear_Markers(),option.classList.toggle("active");let optionsActive=[];options.forEach(o=>{o.classList.contains("active")&&optionsActive.push(o)});const isActive=target=>{const result=optionsActive.find(o=>o.dataset.target==target);return null!=result&&null!=result};0==optionsActive.length&&startMarkers(),isActive("todos")&&startMarkers(),isActive("sabores")&&(markerClusterSabores=new MarkerClusterer(map,markersSabores,mcOptions)),isActive("coresesons")&&(markerClusterCoresESons=new MarkerClusterer(map,markersCoresESons,mcOptions)),isActive("bemestar")&&(markerClusterBem_estar=new MarkerClusterer(map,markersBem_estar,mcOptions)),isActive("experiencias")&&(markerClusterExperiencia=new MarkerClusterer(map,markersExperiencia,mcOptions)),isActive("aromas")&&(markerClusterAromas=new MarkerClusterer(map,markersAromas,mcOptions))}))})}setMarkers(map),autocomplete(document.getElementById("busca-servicos-input"),data,map);const addEventsMarkers=listMarkes=>{listMarkes.forEach(marker=>{marker.addListener("click",(function(){createModal(marker),map.setZoom(16),map.setCenter(marker.getPosition())}))})};addEventsMarkers(markersSabores),addEventsMarkers(markersExperiencia),addEventsMarkers(markersCoresESons),addEventsMarkers(markersAromas),addEventsMarkers(markersBem_estar);var zoomControlDiv=document.createElement("div"),zoomControl=new ZoomControl(zoomControlDiv,map);zoomControlDiv.index=1,map.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(zoomControlDiv)}createServices(),initMap()}();